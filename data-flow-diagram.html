<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIF-HPMV Data Flow Diagram</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }
        .diagram-svg {
            width: 100%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .flow-section {
            margin: 20px 0;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        .flow-section h3 {
            margin-top: 0;
            color: #495057;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>SIF-HPMV Data Flow &amp; Process Diagram</h1>
        
        <svg class="diagram-svg" viewBox="0 0 1400 900" xmlns="http://www.w3.org/2000/svg">
            <!-- Background -->
            <rect width="1400" height="900" fill="#fafafa" stroke="#e0e0e0" stroke-width="2"/>
            <!-- Title -->
            <text x="700" y="30" text-anchor="middle" font-size="22" font-weight="bold" fill="#1a237e">
                Data Flow &amp; Business Process Architecture
            </text>
            <!-- User Actions Section -->
            <g id="user-actions">
                <rect x="50" y="60" width="1300" height="80" fill="#e8eaf6" stroke="#3f51b5" stroke-width="2" rx="10"/>
                <text x="700" y="85" text-anchor="middle" font-size="16" font-weight="bold" fill="#3f51b5">
                    User Interactions
                </text>
                
                <!-- User action boxes -->
                <rect x="80" y="100" width="140" height="30" fill="#5c6bc0" stroke="#3f51b5" stroke-width="1" rx="5"/>
                <text x="150" y="120" text-anchor="middle" font-size="11" fill="white">Login/Authentication</text>
                
                <rect x="240" y="100" width="140" height="30" fill="#5c6bc0" stroke="#3f51b5" stroke-width="1" rx="5"/>
                <text x="310" y="120" text-anchor="middle" font-size="11" fill="white">Map Navigation</text>
                
                <rect x="400" y="100" width="140" height="30" fill="#5c6bc0" stroke="#3f51b5" stroke-width="1" rx="5"/>
                <text x="470" y="120" text-anchor="middle" font-size="11" fill="white">Layer Selection</text>
                
                <rect x="560" y="100" width="140" height="30" fill="#5c6bc0" stroke="#3f51b5" stroke-width="1" rx="5"/>
                <text x="630" y="120" text-anchor="middle" font-size="11" fill="white">Point Management</text>
                
                <rect x="720" y="100" width="140" height="30" fill="#5c6bc0" stroke="#3f51b5" stroke-width="1" rx="5"/>
                <text x="790" y="120" text-anchor="middle" font-size="11" fill="white">Zone Management</text>
                
                <rect x="880" y="100" width="140" height="30" fill="#5c6bc0" stroke="#3f51b5" stroke-width="1" rx="5"/>
                <text x="950" y="120" text-anchor="middle" font-size="11" fill="white">Data Import/Export</text>
                
                <rect x="1040" y="100" width="140" height="30" fill="#5c6bc0" stroke="#3f51b5" stroke-width="1" rx="5"/>
                <text x="1110" y="120" text-anchor="middle" font-size="11" fill="white">Coordinate Conversion</text>
                
                <rect x="1200" y="100" width="140" height="30" fill="#5c6bc0" stroke="#3f51b5" stroke-width="1" rx="5"/>
                <text x="1270" y="120" text-anchor="middle" font-size="11" fill="white">System Config</text>
            </g>
            
            <!-- Frontend Processing -->
            <g id="frontend-processing">
                <rect x="50" y="170" width="600" height="120" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="10"/>
                <text x="350" y="195" text-anchor="middle" font-size="16" font-weight="bold" fill="#1976d2">
                    Frontend Processing (React.js)
                </text>
                
                <!-- State Management -->
                <rect x="80" y="210" width="120" height="60" fill="#42a5f5" stroke="#1976d2" stroke-width="1" rx="5"/>
                <text x="140" y="230" text-anchor="middle" font-size="11" font-weight="bold" fill="white">State</text>
                <text x="140" y="245" text-anchor="middle" font-size="9" fill="white">Management</text>
                <text x="140" y="260" text-anchor="middle" font-size="9" fill="white">useState/useEffect</text>
                
                <!-- UI Updates -->
                <rect x="220" y="210" width="120" height="60" fill="#42a5f5" stroke="#1976d2" stroke-width="1" rx="5"/>
                <text x="280" y="230" text-anchor="middle" font-size="11" font-weight="bold" fill="white">UI Updates</text>
                <text x="280" y="245" text-anchor="middle" font-size="9" fill="white">Component</text>
                <text x="280" y="260" text-anchor="middle" font-size="9" fill="white">Re-rendering</text>
                
                <!-- Data Validation -->
                <rect x="360" y="210" width="120" height="60" fill="#42a5f5" stroke="#1976d2" stroke-width="1" rx="5"/>
                <text x="420" y="230" text-anchor="middle" font-size="11" font-weight="bold" fill="white">Data</text>
                <text x="420" y="245" text-anchor="middle" font-size="9" fill="white">Validation</text>
                <text x="420" y="260" text-anchor="middle" font-size="9" fill="white">Input Checks</text>
                
                <!-- API Calls -->
                <rect x="500" y="210" width="120" height="60" fill="#42a5f5" stroke="#1976d2" stroke-width="1" rx="5"/>
                <text x="560" y="230" text-anchor="middle" font-size="11" font-weight="bold" fill="white">API Calls</text>
                <text x="560" y="245" text-anchor="middle" font-size="9" fill="white">fetch()</text>
                <text x="560" y="260" text-anchor="middle" font-size="9" fill="white">HTTP Requests</text>
            </g>
            
            <!-- API Gateway -->
            <g id="api-gateway">
                <rect x="750" y="170" width="600" height="120" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="10"/>
                <text x="1050" y="195" text-anchor="middle" font-size="16" font-weight="bold" fill="#f57c00">
                    API Gateway &amp; Routing (Express.js)
                </text>
                
                <!-- Authentication -->
                <rect x="780" y="210" width="100" height="60" fill="#ff9800" stroke="#f57c00" stroke-width="1" rx="5"/>
                <text x="830" y="230" text-anchor="middle" font-size="10" font-weight="bold" fill="white">Auth</text>
                <text x="830" y="245" text-anchor="middle" font-size="9" fill="white">JWT Verify</text>
                <text x="830" y="260" text-anchor="middle" font-size="9" fill="white">Middleware</text>
                
                <!-- Route Handling -->
                <rect x="900" y="210" width="100" height="60" fill="#ff9800" stroke="#f57c00" stroke-width="1" rx="5"/>
                <text x="950" y="230" text-anchor="middle" font-size="10" font-weight="bold" fill="white">Routing</text>
                <text x="950" y="245" text-anchor="middle" font-size="9" fill="white">Endpoint</text>
                <text x="950" y="260" text-anchor="middle" font-size="9" fill="white">Mapping</text>
                
                <!-- Data Processing -->
                <rect x="1020" y="210" width="100" height="60" fill="#ff9800" stroke="#f57c00" stroke-width="1" rx="5"/>
                <text x="1070" y="230" text-anchor="middle" font-size="10" font-weight="bold" fill="white">Processing</text>
                <text x="1070" y="245" text-anchor="middle" font-size="9" fill="white">Business</text>
                <text x="1070" y="260" text-anchor="middle" font-size="9" fill="white">Logic</text>
                
                <!-- Interpolation -->
                <rect x="1140" y="210" width="100" height="60" fill="#ff9800" stroke="#f57c00" stroke-width="1" rx="5"/>
                <text x="1190" y="230" text-anchor="middle" font-size="10" font-weight="bold" fill="white">Interpolation</text>
                <text x="1190" y="245" text-anchor="middle" font-size="9" fill="white">Coordinate</text>
                <text x="1190" y="260" text-anchor="middle" font-size="9" fill="white">Calculation</text>
                
                <!-- Response -->
                <rect x="1260" y="210" width="70" height="60" fill="#ff9800" stroke="#f57c00" stroke-width="1" rx="5"/>
                <text x="1295" y="235" text-anchor="middle" font-size="10" font-weight="bold" fill="white">Response</text>
                <text x="1295" y="250" text-anchor="middle" font-size="9" fill="white">JSON</text>
                <text x="1295" y="265" text-anchor="middle" font-size="9" fill="white">Format</text>
            </g>
            
            <!-- Database Operations -->
            <g id="database-operations">
                <rect x="50" y="320" width="1300" height="150" fill="#e8f5e8" stroke="#388e3c" stroke-width="2" rx="10"/>
                <text x="700" y="345" text-anchor="middle" font-size="16" font-weight="bold" fill="#388e3c">
                    Database Operations (MongoDB)
                </text>
                
                <!-- CRUD Operations -->
                <rect x="100" y="365" width="200" height="80" fill="#66bb6a" stroke="#388e3c" stroke-width="1" rx="5"/>
                <text x="200" y="385" text-anchor="middle" font-size="12" font-weight="bold" fill="white">CRUD Operations</text>
                <text x="200" y="405" text-anchor="middle" font-size="10" fill="white">Create • Read • Update • Delete</text>
                <text x="200" y="420" text-anchor="middle" font-size="10" fill="white">Points, Zones, TypePoints</text>
                <text x="200" y="435" text-anchor="middle" font-size="10" fill="white">Collection Management</text>
                
                <!-- Data Aggregation -->
                <rect x="320" y="365" width="200" height="80" fill="#66bb6a" stroke="#388e3c" stroke-width="1" rx="5"/>
                <text x="420" y="385" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Data Aggregation</text>
                <text x="420" y="405" text-anchor="middle" font-size="10" fill="white">Complex Queries</text>
                <text x="420" y="420" text-anchor="middle" font-size="10" fill="white">Filtering &amp; Sorting</text>
                <text x="420" y="435" text-anchor="middle" font-size="10" fill="white">Search Operations</text>
                
                <!-- Import/Export -->
                <rect x="540" y="365" width="200" height="80" fill="#66bb6a" stroke="#388e3c" stroke-width="1" rx="5"/>
                <text x="640" y="385" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Import/Export</text>
                <text x="640" y="405" text-anchor="middle" font-size="10" fill="white">CSV Data Processing</text>
                <text x="640" y="420" text-anchor="middle" font-size="10" fill="white">Bulk Operations</text>
                <text x="640" y="435" text-anchor="middle" font-size="10" fill="white">Data Migration</text>
                
                <!-- Coordinate Processing -->
                <rect x="760" y="365" width="200" height="80" fill="#66bb6a" stroke="#388e3c" stroke-width="1" rx="5"/>
                <text x="860" y="385" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Coordinate Processing</text>
                <text x="860" y="405" text-anchor="middle" font-size="10" fill="white">PK Interpolation</text>
                <text x="860" y="420" text-anchor="middle" font-size="10" fill="white">System Conversion</text>
                <text x="860" y="435" text-anchor="middle" font-size="10" fill="white">Spatial Calculations</text>
                
                <!-- Data Validation -->
                <rect x="980" y="365" width="200" height="80" fill="#66bb6a" stroke="#388e3c" stroke-width="1" rx="5"/>
                <text x="1080" y="385" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Data Validation</text>
                <text x="1080" y="405" text-anchor="middle" font-size="10" fill="white">Schema Validation</text>
                <text x="1080" y="420" text-anchor="middle" font-size="10" fill="white">Integrity Checks</text>
                <text x="1080" y="435" text-anchor="middle" font-size="10" fill="white">Error Handling</text>
                
                <!-- Backup & Recovery -->
                <rect x="1200" y="365" width="130" height="80" fill="#66bb6a" stroke="#388e3c" stroke-width="1" rx="5"/>
                <text x="1265" y="385" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Backup</text>
                <text x="1265" y="405" text-anchor="middle" font-size="10" fill="white">Data Safety</text>
                <text x="1265" y="420" text-anchor="middle" font-size="10" fill="white">Recovery</text>
                <text x="1265" y="435" text-anchor="middle" font-size="10" fill="white">Cloud Storage</text>
            </g>
            
            <!-- Data Flow Arrows -->
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" 
                        refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#1565c0"/>
                </marker>
                <marker id="arrowhead-green" markerWidth="10" markerHeight="7" 
                        refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#2e7d32"/>
                </marker>
                <marker id="arrowhead-orange" markerWidth="10" markerHeight="7" 
                        refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#f57c00"/>
                </marker>
            </defs>
            
            <!-- User to Frontend -->
            <line x1="700" y1="140" x2="350" y2="170" stroke="#1565c0" stroke-width="3" marker-end="url(#arrowhead)"/>
            <text x="525" y="160" font-size="12" fill="#1565c0">User Interactions</text>
            
            <!-- Frontend to API -->
            <line x1="650" y1="230" x2="750" y2="230" stroke="#f57c00" stroke-width="3" marker-end="url(#arrowhead-orange)"/>
            <text x="700" y="220" font-size="12" fill="#f57c00">API Requests</text>
            
            <!-- API to Database -->
            <line x1="1050" y1="290" x2="700" y2="320" stroke="#2e7d32" stroke-width="3" marker-end="url(#arrowhead-green)"/>
            <text x="875" y="310" font-size="12" fill="#2e7d32">Database Operations</text>
            
            <!-- Response flow (dashed lines) -->
            <line x1="700" y1="470" x2="1050" y2="290" stroke="#2e7d32" stroke-width="2" stroke-dasharray="8,4" marker-end="url(#arrowhead-green)"/>
            <text x="875" y="380" font-size="11" fill="#2e7d32">Data Response</text>
            
            <line x1="750" y1="230" x2="650" y2="230" stroke="#f57c00" stroke-width="2" stroke-dasharray="8,4" marker-end="url(#arrowhead-orange)"/>
            <text x="700" y="250" font-size="11" fill="#f57c00">JSON Response</text>
            
            <line x1="350" y1="290" x2="700" y2="140" stroke="#1565c0" stroke-width="2" stroke-dasharray="8,4" marker-end="url(#arrowhead)"/>
            <text x="525" y="215" font-size="11" fill="#1565c0">UI Updates</text>
            
            <!-- Specific Data Flow Examples -->
            <g id="data-flow-examples">
                <rect x="50" y="500" width="1300" height="180" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" rx="10"/>
                <text x="700" y="525" text-anchor="middle" font-size="16" font-weight="bold" fill="#7b1fa2">
                    Specific Data Flow Examples
                </text>
                
                <!-- Authentication Flow -->
                <rect x="80" y="550" width="240" height="100" fill="#ab47bc" stroke="#7b1fa2" stroke-width="1" rx="5"/>
                <text x="200" y="570" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Authentication Flow</text>
                <text x="200" y="590" text-anchor="middle" font-size="10" fill="white">1. User enters credentials</text>
                <text x="200" y="605" text-anchor="middle" font-size="10" fill="white">2. Frontend validates &amp; sends</text>
                <text x="200" y="620" text-anchor="middle" font-size="10" fill="white">3. Backend verifies with bcrypt</text>
                <text x="200" y="635" text-anchor="middle" font-size="10" fill="white">4. JWT token generated &amp; returned</text>
                
                <!-- Point Management -->
                <rect x="340" y="550" width="240" height="100" fill="#ab47bc" stroke="#7b1fa2" stroke-width="1" rx="5"/>
                <text x="460" y="570" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Point Management Flow</text>
                <text x="460" y="590" text-anchor="middle" font-size="10" fill="white">1. User adds/edits point</text>
                <text x="460" y="605" text-anchor="middle" font-size="10" fill="white">2. Coordinate interpolation</text>
                <text x="460" y="620" text-anchor="middle" font-size="10" fill="white">3. Database update</text>
                <text x="460" y="635" text-anchor="middle" font-size="10" fill="white">4. Map refresh with new data</text>
                
                <!-- Zone Management -->
                <rect x="600" y="550" width="240" height="100" fill="#ab47bc" stroke="#7b1fa2" stroke-width="1" rx="5"/>
                <text x="720" y="570" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Zone Management Flow</text>
                <text x="720" y="590" text-anchor="middle" font-size="10" fill="white">1. User defines zone polygon</text>
                <text x="720" y="605" text-anchor="middle" font-size="10" fill="white">2. Geometric validation</text>
                <text x="720" y="620" text-anchor="middle" font-size="10" fill="white">3. Zone data persistence</text>
                <text x="720" y="635" text-anchor="middle" font-size="10" fill="white">4. Visual overlay update</text>
                
                <!-- Data Import -->
                <rect x="860" y="550" width="240" height="100" fill="#ab47bc" stroke="#7b1fa2" stroke-width="1" rx="5"/>
                <text x="980" y="570" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Data Import Flow</text>
                <text x="980" y="590" text-anchor="middle" font-size="10" fill="white">1. CSV file upload</text>
                <text x="980" y="605" text-anchor="middle" font-size="10" fill="white">2. Data parsing &amp; validation</text>
                <text x="980" y="620" text-anchor="middle" font-size="10" fill="white">3. Bulk database operations</text>
                <text x="980" y="635" text-anchor="middle" font-size="10" fill="white">4. UI notification &amp; refresh</text>
                
                <!-- Real-time Updates -->
                <rect x="1120" y="550" width="200" height="100" fill="#ab47bc" stroke="#7b1fa2" stroke-width="1" rx="5"/>
                <text x="1220" y="570" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Real-time Updates</text>
                <text x="1220" y="590" text-anchor="middle" font-size="10" fill="white">1. Data change event</text>
                <text x="1220" y="605" text-anchor="middle" font-size="10" fill="white">2. State update trigger</text>
                <text x="1220" y="620" text-anchor="middle" font-size="10" fill="white">3. Component re-render</text>
                <text x="1220" y="635" text-anchor="middle" font-size="10" fill="white">4. Map layer refresh</text>
            </g>
            
            <!-- Performance & Optimization -->
            <g id="performance">
                <rect x="50" y="710" width="1300" height="80" fill="#fff8e1" stroke="#ff8f00" stroke-width="2" rx="10"/>
                <text x="700" y="735" text-anchor="middle" font-size="16" font-weight="bold" fill="#ff8f00">
                    Performance Optimization &amp; Caching
                </text>
                <text x="700" y="755" text-anchor="middle" font-size="12" fill="#ff8f00">
                    React Memoization • Database Indexing • API Response Caching • Lazy Loading • Image Optimization
                </text>
                <text x="700" y="775" text-anchor="middle" font-size="11" fill="#ff8f00">
                    useCallback • useMemo • MongoDB Indexes • Express.js Middleware • Progressive Loading • Asset Compression
                </text>
            </g>
            
            <!-- Error Handling -->
            <g id="error-handling">
                <rect x="50" y="810" width="1300" height="60" fill="#ffebee" stroke="#d32f2f" stroke-width="2" rx="10"/>
                <text x="700" y="835" text-anchor="middle" font-size="16" font-weight="bold" fill="#d32f2f">
                    Error Handling &amp; Recovery
                </text>
                <text x="700" y="855" text-anchor="middle" font-size="12" fill="#d32f2f">
                    Try-Catch Blocks • Error Boundaries • API Error Responses • User Feedback • Graceful Degradation • Retry Logic
                </text>
            </g>
        </svg>
        
        <div class="flow-section">
            <h3>Key Data Flow Patterns</h3>
            <ul>
                <li><strong>User Authentication:</strong> Secure login flow with JWT token management and role-based access control</li>
                <li><strong>Map Interaction:</strong> Real-time coordinate conversion and interpolation for railway point management</li>
                <li><strong>Data Management:</strong> CRUD operations with validation, error handling, and immediate UI updates</li>
                <li><strong>Import/Export:</strong> Bulk data operations with CSV processing and database synchronization</li>
                <li><strong>Layer Management:</strong> Dynamic map layer switching with optimized rendering and caching</li>
            </ul>
        </div>
        
        <div class="flow-section">
            <h3>Performance Considerations</h3>
            <ul>
                <li><strong>Frontend:</strong> React optimization with memoization, lazy loading, and efficient state management</li>
                <li><strong>Backend:</strong> Express.js middleware optimization, database query optimization, and response caching</li>
                <li><strong>Database:</strong> MongoDB indexing, aggregation pipeline optimization, and connection pooling</li>
                <li><strong>Network:</strong> API response compression, image optimization, and efficient data transfer</li>
            </ul>
        </div>
    </div>
</body>
</html>

// Est-ce que certains d’entre vous seraient disponibles la semaine prochaine pour 
tester mon application ? Le test ne prend que 10 minutes maximum et me permettrait de recueillir 
des retours pour identifier 
les points d’amélioration, notamment ce qui est intuitif pour l’utilisateur et ce qui l’est moins.